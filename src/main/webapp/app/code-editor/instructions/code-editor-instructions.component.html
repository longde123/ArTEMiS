<div
    *ngIf="!noInstructionsAvailable"
    id="cardInstructions"
    class="card-body card resizable-instructions p-0 border-0"
    [ngStyle]="{ 'width.vw': 40, overflow: 'inherit', minHeight: '500px' }"
>
    <div class="card-header text-white bg-primary" (click)="toggleEditorCollapse($event, false)">
        <span class="float-right "><fa-icon icon="chevron-right"></fa-icon></span>
        <h3 class="card-title">
            <fa-icon [icon]="['far', 'list-alt']"></fa-icon>
            <fa-icon *ngIf="editableInstructions && !unsavedChanges" icon="check-circle" class="text-white"></fa-icon>
            <fa-icon *ngIf="editableInstructions && unsavedChanges" icon="exclamation-triangle" class="text-warning"></fa-icon>
            <span jhiTranslate="arTeMiSApp.editor.instructions"> &nbsp; Instructions &nbsp; </span>
            <button *ngIf="editableInstructions" [disabled]="savingInstructions || !unsavedChanges" (click)="saveInstructions($event)" class="btn btn-sm btn-light">
                <fa-icon *ngIf="!savingInstructions" icon="save" class="mr-2"></fa-icon>
                <fa-icon *ngIf="savingInstructions" icon="circle-notch" [spin]="true" class="mr-2"></fa-icon>
                <span jhiTranslate="entity.action.save"></span>
            </button>
        </h3>
    </div>
    <jhi-programming-exercise-instructions
        *ngIf="!editableInstructions; else markdownEditorInstructions"
        (onNoInstructionsAvailable)="onNoInstructionsAvailable()"
        [problemStatement]="problemStatement"
        [exercise]="participation.exercise"
        [participation]="participation"
        [ngClass]="['card', 'card-body', 'p-0', 'border-0']"
        [ngStyle]="{ overflow: 'inherit' }"
    >
    </jhi-programming-exercise-instructions>
    <ng-template #markdownEditorInstructions>
        <jhi-markdown-editor
            [markdown]="problemStatement"
            [defaultHeight]="MarkdownEditorHeight.MEDIUM"
            (markdownChange)="onProblemStatementEditorUpdate($event)"
            [selectedTab]="EditorTab.PREVIEW"
        >
            <jhi-programming-exercise-instructions
                #preview
                [exercise]="exercise"
                [problemStatement]="problemStatement"
                [participation]="participation"
                [ngClass]="['card', 'card-body', 'p-0', 'border-0']"
                [ngStyle]="{ overflow: 'inherit', maxHeight: '500px' }"
            ></jhi-programming-exercise-instructions>
        </jhi-markdown-editor>
    </ng-template>
    <!-- Required for resizing; don't remove empty span -->
    <div class="rg-left"><span></span></div>
</div>
